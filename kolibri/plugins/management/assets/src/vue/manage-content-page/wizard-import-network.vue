<template>

  <core-modal
    title="Import Channel from the Internet"
    :error="wizardState.error"
    :enablebgclickcancel="false"
    :disableclose="wizardState.busy"
    :enablebackbtn="true"
    @cancel="cancel"
    @enter="submit"
    @back="startImportWizard"
  >
    <div class="main">
      <p>Please enter a content channel ID:</p>
      <div>
        <input v-model="contentId" :disabled="wizardState.busy">
      </div>
      <div class="button-wrapper">
        <button class="text-only-button" @click="cancel" :disabled="wizardState.busy">
          Cancel
        </button>
        <button @click="submit" :disabled="!canSubmit">
          Import
        </button>
      </div>
    </div>
  </core-modal>

</template>


<script>

  const actions = require('../../actions');

  module.exports = {
    components: {
      'icon-button': require('icon-button'),
    },
    data: () => ({
      contentId: '',
    }),
    computed: {
      canSubmit() {
        if (this.wizardState.busy) {
          return false;
        }
        return Boolean(this.contentId);
      },
    },
    methods: {
      submit() {
        this.triggerRemoteContentImportTask(this.contentId);
      },
      cancel() {
        this.cancelImportExportWizard();
      },
    },
    vuex: {
      getters: {
        wizardState: (state) => state.pageState.wizardState,
      },
      actions: {
        startImportWizard: actions.startImportWizard,
        triggerRemoteContentImportTask: actions.triggerRemoteContentImportTask,
        cancelImportExportWizard: actions.cancelImportExportWizard,
      },
    },
  };

</script>


<style lang="stylus" scoped>

  @require '~core-theme.styl'

  .main
    text-align: center
    margin-top: 2em

  input
    margin: 1em 0
    padding: 0.4em 0.6em
    border: 2px solid $core-action-normal
    border-radius: 4px

  .button-wrapper
    margin: 1em

  button
    margin: 0 0.2em

  .text-only-button
    color: $core-text-annotation
    border: 2px $core-text-annotation solid

</style>
